"use strict";(()=>{var e={};e.id=528,e.ids=[528],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1469:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>d,originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>h});var o={};n.r(o),n.d(o,{POST:()=>c});var i=n(5419),s=n(9108),r=n(9678),a=n(8070);async function c(e){try{let t;let{url:n}=await e.json();if(!n)return a.Z.json({error:"URL is required"},{status:400});let o=n.trim();o.startsWith("http://")||o.startsWith("https://")||(o="https://"+o);try{if(!(t=new URL(o).hostname).includes("."))return a.Z.json({error:`Please specify the full domain. Did you mean ${t}.com or ${t}.co.uk?`,suggestions:[".com",".co.uk",".org",".net",".io"].map(e=>`${t}${e}`)},{status:400})}catch(e){return a.Z.json({error:"Invalid URL format. Please enter a valid domain (e.g., example.com or example.co.uk)"},{status:400})}console.log(`
üîç Analyzing website: ${o}`),console.log(`Domain: ${t}`);let i=Date.now(),s="",r={};if(process.env.OXYLABS_USERNAME&&process.env.OXYLABS_PASSWORD)try{console.log("\uD83D\uDD27 Using Oxylabs for enhanced extraction...");let e=await fetch("https://realtime.oxylabs.io/v1/queries",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+Buffer.from(`${process.env.OXYLABS_USERNAME}:${process.env.OXYLABS_PASSWORD}`).toString("base64")},body:JSON.stringify({source:"universal",url:o,render:"html",javascript:!0,timeout:3e4,parse:!0,parsing_instructions:{emails:{_fns:[{_fn:"xpath",_args:["//a[contains(@href,'mailto:')]/@href"]}]},phones:{_fns:[{_fn:"xpath",_args:["//a[contains(@href,'tel:')]/@href"]}]},platform_signals:{_fns:[{_fn:"xpath",_args:["//meta[@name='generator']/@content"]}]},social_links:{_fns:[{_fn:"xpath",_args:["//a[contains(@href,'facebook.com') or contains(@href,'instagram.com') or contains(@href,'linkedin.com') or contains(@href,'twitter.com')]/@href"]}]},business_name:{_fns:[{_fn:"xpath",_args:["//meta[@property='og:site_name']/@content"]}]},page_title:{_fns:[{_fn:"css",_args:["title"]}]},meta_description:{_fns:[{_fn:"xpath",_args:["//meta[@name='description']/@content"]}]},meta_keywords:{_fns:[{_fn:"xpath",_args:["//meta[@name='keywords']/@content"]}]},og_title:{_fns:[{_fn:"xpath",_args:["//meta[@property='og:title']/@content"]}]},og_description:{_fns:[{_fn:"xpath",_args:["//meta[@property='og:description']/@content"]}]},html_lang:{_fns:[{_fn:"xpath",_args:["//html/@lang"]}]},og_locale:{_fns:[{_fn:"xpath",_args:["//meta[@property='og:locale']/@content"]}]},currency_symbols:{_fns:[{_fn:"xpath",_args:["//text()[contains(., '\xa3') or contains(., '‚Ç¨') or contains(., '$') or contains(., '\xa5') or contains(., '‚Çπ')]"]}]},og_type:{_fns:[{_fn:"xpath",_args:["//meta[@property='og:type']/@content"]}]},all_text_emails:{_fns:[{_fn:"css",_args:["body"]}]}}}),signal:AbortSignal.timeout(35e3)});if(e.ok){let t=await e.json(),n=t.results?.[0]?.content;"string"==typeof n?s=n:n&&"object"==typeof n&&(s=n.html||JSON.stringify(n)),r=t.results?.[0]?.parsed||{},console.log("‚úÖ Oxylabs extraction successful"),console.log("HTML type:",typeof s,"Length:",s.length),r&&(console.log("\uD83D\uDCE7 Oxylabs Emails:",r.emails||"none"),console.log("\uD83D\uDCF1 Oxylabs Phones:",r.phones||"none"),console.log("\uD83D\uDD27 Platform signals:",r.platform_signals||"none"),console.log("\uD83C\uDFE2 Business name:",r.business_name||"none"),console.log("\uD83D\uDD17 Social links:",r.social_links||"none"),console.log("\uD83D\uDCDD SEO Data:",{title:r.page_title||"none",description:r.meta_description||"none",keywords:r.meta_keywords||"none"}))}else{let t=await e.text();throw console.error("Oxylabs response error:",e.status,t.substring(0,200)),Error(`Oxylabs request failed with status ${e.status}`)}}catch(e){console.error("‚ö†Ô∏è Oxylabs failed, falling back to direct fetch:",e)}if(!s){let e=await fetch(o,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"},signal:AbortSignal.timeout(1e4)});if(!e.ok)throw Error(`Failed to fetch website: ${e.status}`);s=await e.text()}let c=((Date.now()-i)/1e3).toFixed(1);console.log(`‚è±Ô∏è Analysis completed in ${c}s`);let l=s.match(/<meta\s+property=["']og:image["']\s+content=["']([^"']+)["']/i)?.[1]||"",u=s.match(/<link\s+[^>]*rel=["'](?:icon|shortcut icon)["'][^>]*href=["']([^"']+)["']/i)?.[1]||"",p=l;p&&!p.startsWith("http")?p=new URL(p,o).href:!p&&u&&(p=u.startsWith("http")?u:new URL(u,o).href),console.log(`üì∏ Thumbnail: ${p||"Not found"}`);let g=function(e,t){let n={businessType:"",mainOffer:"",pricePoint:"",targetAudience:"",valueProps:[],hasEcommerce:!1,hasBooking:!1,isLeadGen:!1,industry:"",platform:"",confidence:0,signals:[],reasoning:"",location:function(e,t){let n={country:"",currency:"$",language:"",confidence:"low"},o=e.match(/<html[^>]*lang=["']([^"']+)["']/i)?.[1]||"";if(o&&(n.language=o,o.includes("-"))){let e=o.split("-")[1].toUpperCase();n.country=e,n.confidence="high"}let i=e.match(/<meta\s+property=["']og:locale["']\s+content=["']([^"']+)["']/i)?.[1]||"";if(i&&(n.language=i,i.includes("_"))){let e=i.split("_")[1]?.toUpperCase();e&&(n.country=e,n.confidence="high")}for(let[e,o]of Object.entries({".uk":{country:"GB",currency:"\xa3"},".co.uk":{country:"GB",currency:"\xa3"},".ca":{country:"CA",currency:"CAD $"},".au":{country:"AU",currency:"AUD $"},".com.au":{country:"AU",currency:"AUD $"},".nz":{country:"NZ",currency:"NZD $"},".co.nz":{country:"NZ",currency:"NZD $"},".in":{country:"IN",currency:"‚Çπ"},".co.in":{country:"IN",currency:"‚Çπ"},".za":{country:"ZA",currency:"R"},".co.za":{country:"ZA",currency:"R"},".de":{country:"DE",currency:"‚Ç¨"},".fr":{country:"FR",currency:"‚Ç¨"},".it":{country:"IT",currency:"‚Ç¨"},".es":{country:"ES",currency:"‚Ç¨"},".nl":{country:"NL",currency:"‚Ç¨"},".be":{country:"BE",currency:"‚Ç¨"},".eu":{country:"EU",currency:"‚Ç¨"},".jp":{country:"JP",currency:"\xa5"},".cn":{country:"CN",currency:"\xa5"},".br":{country:"BR",currency:"R$"},".mx":{country:"MX",currency:"MX$"}}))if(t.endsWith(e)){n.country=o.country,n.currency=o.currency,"high"!==n.confidence&&(n.confidence="medium");break}for(let{pattern:t,currency:o,country:i}of[{pattern:/¬£[\d,]+/g,currency:"\xa3",country:"GB"},{pattern:/‚Ç¨[\d,]+/g,currency:"‚Ç¨",country:"EU"},{pattern:/\$[\d,]+/g,currency:"$",country:"US"},{pattern:/CAD\s*\$[\d,]+/g,currency:"CAD $",country:"CA"},{pattern:/AUD\s*\$[\d,]+/g,currency:"AUD $",country:"AU"},{pattern:/NZD\s*\$[\d,]+/g,currency:"NZD $",country:"NZ"},{pattern:/‚Çπ[\d,]+/g,currency:"‚Çπ",country:"IN"},{pattern:/¬•[\d,]+/g,currency:"\xa5",country:"JP"},{pattern:/R\s*[\d,]+/g,currency:"R",country:"ZA"}])if(t.test(e)){n.currency=o,n.country||(n.country=i,n.confidence="medium");break}if("high"!==n.confidence&&(/\b[A-Z]{1,2}[0-9R][0-9A-Z]?\s*[0-9][A-Z]{2}\b/i.test(e)?(n.country="GB",n.currency="\xa3",n.confidence="high"):/\b\d{5}(-\d{4})?\b/.test(e)&&(n.country="US",n.currency="$",n.confidence="medium")),!n.country&&t.endsWith(".com")&&(n.country="US",n.currency="$",n.confidence="low"),n.country){let e={GB:"\xa3",UK:"\xa3",US:"$",CA:"CAD $",AU:"AUD $",NZ:"NZD $",JP:"\xa5",CN:"\xa5",IN:"‚Çπ",SG:"S$",ZA:"R",BR:"R$",MX:"MX$",DE:"‚Ç¨",FR:"‚Ç¨",IT:"‚Ç¨",ES:"‚Ç¨",NL:"‚Ç¨",BE:"‚Ç¨",AT:"‚Ç¨",PT:"‚Ç¨",GR:"‚Ç¨",FI:"‚Ç¨",IE:"‚Ç¨",LU:"‚Ç¨",SK:"‚Ç¨",SI:"‚Ç¨"};e[n.country]&&(n.currency=e[n.country])}return console.log("\uD83D\uDCCD Location detection:",n),n}(e,t)},o=e.match(/<meta\s+name=["']description["']\s+content=["']([^"']+)["']/i)?.[1]||"",i=e.match(/<meta\s+property=["']og:description["']\s+content=["']([^"']+)["']/i)?.[1]||"",s=e.match(/<title>([^<]+)<\/title>/i)?.[1]||"",r=e.match(/<h1[^>]*>([^<]+)<\/h1>/gi)?.map(e=>e.replace(/<[^>]+>/g,"")).join(" ")||"";for(let[t,a]of(console.log("\uD83D\uDCDD Page Title:",s),console.log("\uD83D\uDCDD Meta Description:",o),console.log("\uD83D\uDCDD OG Description:",i),console.log("\uD83D\uDCDD H1 Text:",r?r.substring(0,100):"None found"),console.log("\uD83D\uDD27 Detecting platform..."),Object.entries({Wix:/wix\.com|wixstatic\.com|wixsite\.com|parastorage\.com|wix-code|static\.wixstatic/gi,Shopify:/shopify|myshopify\.com|cdn\.shopify|shopify-assets/gi,WordPress:/wp-content|wordpress|wp-json|wp-includes/gi,Squarespace:/squarespace|sqsp\.net|squarespace-cdn/gi,Webflow:/webflow\.com|webflow\.io/gi,WooCommerce:/woocommerce|wc-ajax/gi,BigCommerce:/bigcommerce/gi,Magento:/magento|mage\//gi,PrestaShop:/prestashop/gi,ClickFunnels:/clickfunnels|cfcdn\.com/gi,Leadpages:/leadpages|lpusercontent/gi,Unbounce:/unbounce|ub-assets/gi,"Custom/Unknown":null})))if(a&&a.test(e)){n.platform=t,n.signals.push(`Platform: ${t} detected`),console.log(`‚úÖ Platform detected: ${t}`),"Shopify"===t||"WooCommerce"===t||"BigCommerce"===t||"Magento"===t?(n.hasEcommerce=!0,n.signals.push("E-commerce platform detected - likely selling products"),n.confidence+=30):"ClickFunnels"===t||"Leadpages"===t||"Unbounce"===t?(n.isLeadGen=!0,n.signals.push("Landing page builder detected - likely focused on lead generation"),n.confidence+=25):"Wix"===t&&(n.signals.push("Wix site detected - checking for business features"),n.confidence+=20);break}n.platform||(n.platform="Custom/Unknown",console.log("‚ùì Platform: Custom or Unknown"));let a=`${s} ${o} ${i} ${r}`.toLowerCase(),c={homeimprovement:{pattern:/kitchen|bathroom|renovation|remodel|cabinet|countertop|flooring|construction|interior design|home improvement|fitting|installation/gi,weight:12,description:"Home improvement & renovation"},ecommerce:{pattern:/shop|store|buy|cart|checkout|product|shipping|order|purchase|add to cart|shop now/gi,weight:10,description:"Selling products online"},saas:{pattern:/software|app|platform|dashboard|api|subscription|pricing|trial|demo|features/gi,weight:8,description:"Software as a Service"},service:{pattern:/service|consultation|appointment|book|schedule|hire|contact us|get quote/gi,weight:7,description:"Service-based business"},agency:{pattern:/agency|marketing|design|development|creative|studio|clients|portfolio|case study/gi,weight:6,description:"Agency or consultancy"},education:{pattern:/course|learn|training|tutorial|education|student|enroll|curriculum|certification/gi,weight:5,description:"Education or training"},healthcare:{pattern:/health|medical|doctor|clinic|patient|appointment|treatment|therapy|wellness/gi,weight:5,description:"Healthcare services"},realestate:{pattern:/property|real estate|home|house|apartment|rent|buy|sell|listing|agent/gi,weight:3,description:"Real estate"},fitness:{pattern:/fitness|gym|workout|training|coach|nutrition|weight|muscle|exercise/gi,weight:4,description:"Fitness & wellness"},beauty:{pattern:/beauty|salon|spa|hair|nail|makeup|skincare|cosmetic|treatment/gi,weight:4,description:"Beauty & cosmetics"},restaurant:{pattern:/restaurant|food|menu|delivery|takeout|cuisine|dining|chef|reservation/gi,weight:4,description:"Food & dining"},legal:{pattern:/law|legal|attorney|lawyer|consultation|case|court|justice|rights/gi,weight:3,description:"Legal services"},finance:{pattern:/finance|loan|credit|investment|banking|mortgage|insurance|tax|accounting/gi,weight:3,description:"Financial services"}},l={};for(let[e,t]of Object.entries(c)){let n=a.match(t.pattern)||[];if(n.length>0){let o=[...new Set(n.map(e=>e.toLowerCase()))];l[e]={score:o.length*t.weight,matches:o.slice(0,3)}}}let u="",p=0,g=[];for(let[e,t]of Object.entries(l))t.score>p&&(p=t.score,u=e,g=t.matches);if(u&&(n.businessType=u,n.industry=c[u].description,n.confidence+=Math.min(30,2*p),n.signals.push(`Detected ${g.length} ${u} keywords: ${g.join(", ")}`)),n.hasEcommerce=/add to cart|shop now|buy now|checkout|shopping cart|product|price|sale/gi.test(e),n.hasBooking=/book now|schedule|appointment|consultation|calendar|booking|reserve/gi.test(e),n.isLeadGen=/get quote|free consultation|contact us|request demo|download|sign up|newsletter/gi.test(e),o)n.mainOffer=o.substring(0,150);else if(i)n.mainOffer=i.substring(0,150);else if(s)n.mainOffer=s.substring(0,150);else{let t=e.match(/<h[12][^>]*>([^<]+)<\/h[12]>/gi)||[];if(t.length>0){let e=t[0].replace(/<[^>]+>/g,"").trim().substring(0,100);n.mainOffer=e}}let d="$";t.endsWith(".uk")||t.endsWith(".co.uk")?d="\xa3":t.endsWith(".eu")||t.endsWith(".de")||t.endsWith(".fr")||t.endsWith(".es")||t.endsWith(".it")?d="‚Ç¨":t.endsWith(".au")?d="A$":t.endsWith(".ca")&&(d="C$"),e.includes("\xa3")||e.includes("GBP")?d="\xa3":(e.includes("‚Ç¨")||e.includes("EUR"))&&(d="‚Ç¨");let h=[];for(let t of[/\$[\d,]+(?:\.\d{2})?/g,/¬£[\d,]+(?:\.\d{2})?/g,/‚Ç¨[\d,]+(?:\.\d{2})?/g,/USD\s*[\d,]+/gi,/GBP\s*[\d,]+/gi,/EUR\s*[\d,]+/gi,/from\s*[\$¬£‚Ç¨][\d,]+/gi]){let n=e.match(t)||[];h.push(...n.slice(0,3))}if(h.length>0){n.pricePoint=h[0],n.currency=d;let e=parseInt(h[0].replace(/\D/g,""));e>0&&(e<50?n.priceRange="budget":e<200?n.priceRange="mid-range":n.priceRange="premium")}else n.currency=d;let m=new Set;for(let t of[/(?:‚úì|‚úî|‚òÖ|‚Ä¢)\s*([^<\n]{10,60})/g,/<li[^>]*>([^<]{10,60})<\/li>/g]){for(let n of e.matchAll(t)){let e=n[1].trim();if(e.length>10&&e.length<60&&!e.includes("cookie")&&(m.add(e),m.size>=3))break}if(m.size>=3)break}n.valueProps=Array.from(m);let f=[];for(let[e,t]of Object.entries({b2b:/business|enterprise|company|organization|team|corporate|professional/gi,b2c:/personal|individual|family|home|lifestyle|consumer/gi,women:/women|female|ladies|girl|her|she/gi,men:/men|male|guys|gentlemen|his|he/gi,parents:/parent|mom|dad|family|kids|children|baby/gi,seniors:/senior|elderly|retirement|aged|older/gi,youth:/young|teen|student|youth|college|university/gi}))t.test(a)&&f.push(e);n.targetAudience=f.slice(0,2).join(", ")||"general",n.businessType||(n.hasEcommerce?(n.businessType="ecommerce",n.signals.push("Shopping features detected but unclear business focus"),n.confidence+=15):n.hasBooking?(n.businessType="service",n.signals.push("Booking/appointment features suggest service business"),n.confidence+=15):n.isLeadGen?(n.businessType="leadgen",n.signals.push("Lead capture forms suggest lead generation focus"),n.confidence+=10):(n.businessType="general",n.signals.push("Unable to determine specific business type from content"),n.signals.push("This suggests your site may be too generic or unfocused for effective ads"),n.confidence=10));let y=[];return n.platform&&"Custom/Unknown"!==n.platform&&y.push(`I detected you're using ${n.platform}`),n.businessType&&"general"!==n.businessType&&y.push(`Your site appears to be ${n.industry||n.businessType} based on the content and features I found`),n.hasEcommerce&&y.push("Shopping cart and product features are present"),n.hasBooking&&y.push("Booking or appointment scheduling detected"),n.pricePoint&&y.push(`Price points suggest ${n.priceRange||"standard"} tier offerings`),n.confidence=Math.min(100,n.confidence),y.length>0?(n.reasoning=y.join(". ")+".",n.confidence<50?n.reasoning+=" Note: My analysis confidence is low - please verify and correct if needed.":n.confidence<75?n.reasoning+=" This is my best guess based on what I can see.":n.reasoning+=" This analysis should align with how Facebook and Google see your site."):n.reasoning="I had difficulty analyzing your site content. This might indicate SEO or content clarity issues.",n}(s,t),d=g.platform;console.log("\uD83D\uDD0D CRITICAL: Checking for Facebook Pixel..."),console.log(`Platform: ${d}`);let h=!1,m=[],f=!1,y="none";for(let e of[/facebook\.com\/tr/gi,/fbq\(['"]init['"]/gi,/fbq\(['"]track['"]/gi,/_fbq/gi,/connect\.facebook\.net.*fbevents\.js/gi,/fbpixel/gi,/facebook.*pixel/gi,/Meta.*Pixel/gi])if(e.test(s)){h=!0,console.log(`‚úÖ Pixel pattern found: ${e.source}`);break}if(h||console.log("‚ùå NO FACEBOOK PIXEL DETECTED - Critical issue!"),h){let e;let t=/fbq\(['"]init['"],\s*['"](\d{15,16})['"]/gi;for(;null!==(e=t.exec(s));)m.includes(e[1])||(m.push(e[1]),console.log(`üìä Found Pixel ID: ${e[1]}`));f=m.length>1,0===m.length&&"Wix"===d&&/facebook.*pixel|fbevents|meta.*pixel/gi.test(s)&&(console.log("‚ö†Ô∏è Wix Facebook Pixel integration detected but NO PIXEL ID configured!"),y="wix_unconfigured")}let D=[],b=/facebook.*conversions.*api/gi.test(s)||/server.*events/gi.test(s),w=/<meta.*name=['"]facebook-domain-verification['"]/gi.test(s),k=function(e,t,n={}){let o={emails:[],phones:[],mobiles:[],landlines:[],socialLinks:{},platform:""};if(n.emails){let e=n.emails.map(e=>e.replace("mailto:","")).filter(e=>e&&!e.includes("example.com"));o.emails.push(...e),console.log("\uD83D\uDCE7 Oxylabs found emails:",e)}n.phones&&(n.phones.map(e=>e.replace("tel:","")).filter(e=>e).forEach(e=>{(function(e){let t=e.replace(/\D/g,"");if(t.startsWith("447")&&12===t.length||t.startsWith("07")&&11===t.length)return!0;if(t.startsWith("1")&&11===t.length){let e=t.substring(1,4);return["201","202","203","205","206","207","208","209","210","212","213","214","215","216","217","218","219","224","225","228","229","231","234","239","240","248","251","252","253","254","256","260","262","267","269","270","276","281","301","302","303","304","305","307","308","309","310","312","313","314","315","316","317","318","319","320","321","323","330","331","334","336","337","339","340","341","347","351","352","360","361","364","380","385","386","401","402","404","405","406","407","408","409","410","412","413","414","415","417","419","423","424","425","430","432","434","435","440","442","443","445","458","463","469","470","475","478","479","480","484","501","502","503","504","505","507","508","509","510","512","513","515","516","517","518","520","530","534","539","540","541","551","559","561","562","563","564","567","570","571","573","574","575","580","585","586","601","602","603","605","606","607","608","609","610","612","614","615","616","617","618","619","620","623","626","628","629","630","631","636","641","646","650","651","657","659","660","661","662","667","669","678","680","681","682","689","701","702","703","704","706","707","708","712","713","714","715","716","717","718","719","720","724","725","727","731","732","734","737","740","743","747","754","757","760","762","763","764","765","769","770","772","773","774","775","779","781","785","786","801","802","803","804","805","806","808","810","812","813","814","815","816","817","818","828","830","831","832","838","843","845","847","848","850","854","856","857","858","859","860","862","863","864","865","870","872","878","901","903","904","906","907","908","909","910","912","913","914","915","916","917","918","919","920","925","928","929","930","931","934","936","937","938","940","941","945","947","949","951","952","954","956","959","970","971","972","973","978","979","980","984","985","989"].includes(e)}return!1})(e.replace(/\D/g,""))?o.mobiles.push(e):o.landlines.push(e),o.phones.push(e)}),console.log("\uD83D\uDCF1 Mobile numbers found:",o.mobiles),console.log("‚òéÔ∏è Landline numbers found:",o.landlines)),n.social_links&&n.social_links.forEach(e=>{e.includes("facebook.com")&&(o.socialLinks.facebook=e),e.includes("instagram.com")&&(o.socialLinks.instagram=e),e.includes("linkedin.com")&&(o.socialLinks.linkedin=e)});let i=e.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/gi)||[],s=["example.com","email.com","domain.com","sentry.io","jquery","bootstrap"];o.emails=[...new Set(i)].filter(e=>{let t=e.toLowerCase();return!s.some(e=>t.includes(e))&&!t.includes("noreply")&&!t.includes("no-reply")&&!t.includes("@2x")&&!t.includes(".png")&&!t.includes(".jpg")}).slice(0,3);let r=new Set;for(let t of e.matchAll(/href=["']?tel:([^"'\s>]+)["']?/gi)){let e=t[1].trim(),n=e.replace(/\D/g,"");n.length>=10&&n.length<=15&&(console.log(`Found tel: link: ${e}`),r.add(a(e)))}for(let t of[/(?:^|[^\d])((?:\+44|0)[1-9]\d{1,3}[-.\s]?\d{3,4}[-.\s]?\d{3,4})(?:[^\d]|$)/g,/whatsapp.*?(\+?\d{10,15})/gi,/(?:^|[^\d])(\+\d{1,3}[-.\s]?\d{1,4}[-.\s]?\d{1,4}[-.\s]?\d{1,9})(?:[^\d]|$)/g])for(let n of e.matchAll(t)){let e=n[0].trim(),t=(e=e.replace(/^[^\d+]+|[^\d]+$/g,"")).replace(/\D/g,"");!(t.length>=10)||!(t.length<=15)||t.startsWith("20")||t.startsWith("19")||e.includes("$")||r.add(a(e))}function a(e){let t=e.replace(/\D/g,"");return 10===t.length&&t[0]>="2"?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:11===t.length&&"1"===t[0]?`+1 (${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7)}`:e.trim()}for(let[n,i]of(o.phones=Array.from(r).slice(0,3),console.log(`Phone extraction for ${t}: found ${o.phones.length} phones`,o.phones),Object.entries({facebook:/(?:https?:\/\/)?(?:www\.)?facebook\.com\/([^\/\s"]+)/i,instagram:/(?:https?:\/\/)?(?:www\.)?instagram\.com\/([^\/\s"]+)/i,twitter:/(?:https?:\/\/)?(?:www\.)?twitter\.com\/([^\/\s"]+)/i,linkedin:/(?:https?:\/\/)?(?:www\.)?linkedin\.com\/(?:company|in)\/([^\/\s"]+)/i,youtube:/(?:https?:\/\/)?(?:www\.)?youtube\.com\/(?:c|channel|user)\/([^\/\s"]+)/i}))){let t=e.match(i);t&&t[1]&&(o.socialLinks[n]=t[1])}for(let t of[/<meta\s+property="og:site_name"\s+content="([^"]+)"/i,/<meta\s+name="application-name"\s+content="([^"]+)"/i,/<title>([^<]+)<\/title>/i]){let n=e.match(t);if(n&&n[1]){o.businessName=n[1].trim();break}}return o}(s,t,r),x=function(e){let t={primaryCTA:"",allCTAs:[],conversionType:"",urgencyWords:[],hasForm:!1,hasChat:!1,hasCalendar:!1,formTypes:[]},n=new Set;for(let t of[/<button[^>]*>([^<]+)<\/button>/gi,/<a[^>]*class="[^"]*btn[^"]*"[^>]*>([^<]+)<\/a>/gi,/<a[^>]*href="[^"]*"[^>]*class="[^"]*button[^"]*"[^>]*>([^<]+)<\/a>/gi])for(let o of e.matchAll(t)){let e=o[1].trim();e.length>2&&e.length<50&&!e.includes("<")&&n.add(e)}t.allCTAs=Array.from(n);let o=t.allCTAs.join(" ").toLowerCase();/buy now|add to cart|shop now|purchase|checkout/i.test(o)?(t.conversionType="purchase",t.primaryCTA=t.allCTAs.find(e=>/buy|shop|cart/i.test(e))||t.allCTAs[0]):/book now|schedule|appointment|consultation/i.test(o)?(t.conversionType="booking",t.primaryCTA=t.allCTAs.find(e=>/book|schedule/i.test(e))||t.allCTAs[0]):/get quote|request quote|get pricing|get estimate/i.test(o)?(t.conversionType="quote",t.primaryCTA=t.allCTAs.find(e=>/quote|pricing/i.test(e))||t.allCTAs[0]):/contact|call|get in touch|enquire/i.test(o)?(t.conversionType="contact",t.primaryCTA=t.allCTAs.find(e=>/contact|call/i.test(e))||t.allCTAs[0]):/sign up|register|join|start.*free/i.test(o)?(t.conversionType="signup",t.primaryCTA=t.allCTAs.find(e=>/sign|register/i.test(e))||t.allCTAs[0]):/download|get.*free|claim/i.test(o)&&(t.conversionType="leadmagnet",t.primaryCTA=t.allCTAs.find(e=>/download|free/i.test(e))||t.allCTAs[0]);let i=e.match(/limited|today|now|hurry|last chance|ends|only|left|remaining|sale/gi)||[];return t.urgencyWords=[...new Set(i.map(e=>e.toLowerCase()))],t.hasForm=/<form/i.test(e),t.hasChat=/chat|intercom|drift|crisp|tawk|zendesk|messenger/i.test(e),t.hasCalendar=/calendly|acuity|schedule\.once|booking.*calendar/i.test(e),/<input[^>]*type=["']email["']/i.test(e)&&t.formTypes.push("email capture"),/<input[^>]*type=["']tel["']/i.test(e)&&t.formTypes.push("phone capture"),/<textarea/i.test(e)&&t.formTypes.push("message form"),console.log("\uD83C\uDFAF CTA Detection:",{primary:t.primaryCTA,type:t.conversionType,total:t.allCTAs.length}),t}(s),C="";h?"wix_unconfigured"===y?(C="‚ö†Ô∏è Wix has Facebook Pixel integration BUT you haven't added your Pixel ID in Wix settings!",D.push("wix_pixel_not_configured"),h=!1):f?(C=`Found ${m.length} different pixels (${m.join(", ")}) - this can cause tracking conflicts!`,D.push("multiple_pixels")):1===m.length?(C=`‚úÖ Pixel detected: ${m[0]}`,b||D.push("no_conversions_api"),w||D.push("no_domain_verification")):(C="Pixel code found but no ID detected - might be improperly configured",D.push("pixel_misconfigured")):(C="No Facebook Pixel detected - you're losing valuable data!",D.push("no_pixel"));let _={url:o,domain:t,thumbnail:p,pixelFound:h,pixelIds:m,multiplePixels:f,issues:D,message:C,analysisTime:c,hasConversionsAPI:b,hasDomainVerification:w,contactInfo:k,ctaInfo:x,businessInfo:g,recommendations:function(e,t,n){let o=[];return e.includes("no_pixel")&&(o.push("\uD83D\uDEA8 Critical: No Facebook Pixel detected - you're flying blind without conversion data"),o.push("\uD83D\uDCB0 You're losing money: Can't retarget website visitors (70% cheaper than cold traffic)"),o.push("\uD83D\uDCCA Missing data on what's working - no way to optimize campaigns")),e.includes("wix_pixel_not_configured")&&(o.push("\uD83D\uDD27 Good news: Wix has Facebook Pixel ready - you just need to add your Pixel ID!"),o.push("\uD83D\uDCDD Go to: Wix Dashboard ‚Üí Marketing Tools ‚Üí Facebook Pixel ‚Üí Add your ID"),o.push("‚è±Ô∏è Takes 2 minutes to fix and you'll start collecting data immediately")),e.includes("multiple_pixels")&&(o.push("‚ö†Ô∏è Multiple pixels detected - this causes data conflicts and inaccurate reporting"),o.push("\uD83C\uDFAF Your conversion tracking is likely double-counting, making ROI look better than reality"),o.push("\uD83D\uDD27 Quick fix: Remove duplicate pixels and use one master pixel across your site")),e.includes("no_conversions_api")&&(o.push("\uD83D\uDCF1 iOS users invisible: Without Conversions API, you're missing 30-50% of conversions"),o.push("\uD83D\uDEE1Ô∏è Your tracking is vulnerable to ad blockers and browser restrictions")),e.includes("no_domain_verification")&&(o.push("\uD83D\uDD10 Domain not verified - competitors can hijack your links in ads"),o.push("\uD83D\uDCC8 Missing out on aggregated event measurement for iOS tracking")),e.includes("pixel_misconfigured")&&(o.push("\uD83D\uDD34 Pixel code detected but not firing properly - all your data is lost"),o.push("\uD83D\uDCA1 Common cause: Pixel installed in wrong location or syntax errors")),t&&t.conversionType?n?"purchase"===t.conversionType?o.push("\uD83D\uDED2 Make sure you're tracking Purchase and AddToCart events"):"booking"===t.conversionType?o.push("\uD83D\uDCC5 Track Schedule/CompleteRegistration events for bookings"):"quote"===t.conversionType?o.push("\uD83D\uDCDD Track Lead events when quotes are requested"):"contact"===t.conversionType&&o.push("\uD83D\uDCDE Track Contact events for form submissions"):o.push(`üí∏ You want visitors to "${t.primaryCTA||"convert"}" but can't track if they do!`):o.push("‚ö†Ô∏è No clear CTA found - visitors won't know what action to take"),e.includes("no_pixel")||0!==o.length||(o.push("‚úÖ Pixel detected - but is it tracking the right events?"),o.push("\uD83C\uDFAF Most sites miss Purchase, AddToCart, and ViewContent events"),o.push("\uD83D\uDE80 Proper event tracking can improve ROAS by 2-3x")),o.slice(0,4)}(D,x,h)};return a.Z.json(_)}catch(e){if(console.error("Site analysis error:",e),"AbortError"===e.name)return a.Z.json({error:"Website took too long to respond",fallback:!0},{status:408});return a.Z.json({error:"Could not analyze website",details:e.message,fallback:!0},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/analyze-site/route",pathname:"/api/analyze-site",filename:"route",bundlePath:"app/api/analyze-site/route"},resolvedPagePath:"/Users/marktaylor/Desktop/First-Aid-For-Ads/app/api/analyze-site/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:g,headerHooks:d,staticGenerationBailout:h}=l,m="/api/analyze-site/route";function f(){return(0,r.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:p})}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),o=t.X(0,[638,206],()=>n(1469));module.exports=o})();